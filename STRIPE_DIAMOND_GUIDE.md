# راهنمای گام‌به‌گام: اضافه کردن پلن Diamond به Stripe

## پیش‌نیاز

- حساب Stripe (حالت Test یا Live)
- ورود به [Stripe Dashboard](https://dashboard.stripe.com)

---

## مرحله ۱: ورود به کاتالوگ محصولات

1. از منوی سمت چپ روی **Produktkatalog** (Product Catalog) کلیک کنید.
2. روی **Produkter** (Products) بروید.
3. روی دکمه **+ Lägg till produkt** (Add product) کلیک کنید.

---

## مرحله ۲: ساخت محصول Diamond

1. **Namn** (Name): `Diamond Plan` یا `Diamond`
   - مهم: نام باید کلمه **Diamond** داشته باشد تا در اپ شما به‌درستی شناسایی شود.
2. **Beskrivning** (Description): توضیح کوتاه اختیاری، مثلاً "Unlimited everything – Soulmates, Likes, DMs, Blind Dates, no cooldown."
3. **Bild** (Image): در صورت تمایل یک تصویر آپلود کنید.
4. ذخیره کنید (**Spara** / Save).

---

## مرحله ۳: تعریف قیمت (Price) برای Diamond

1. بعد از ساخت محصول، در همان صفحه بخش **Priser** (Prices) را ببینید.
2. روی **Lägg till pris** (Add price) کلیک کنید.
3. تنظیمات:
   - **Pris** (Price): مبلغ (مثلاً 199 برای 199 kr).
   - **Valuta** (Currency): مثلاً **SEK** (کرون سوئد) یا هر ارز دیگری که می‌خواهید.
   - **Faktureringsintervall** (Billing period): **Månadsvis** (Monthly) یا **Årlig** (Yearly).
4. ذخیره کنید.

**چند ارز (هر کشور واحد پول خودش):**  
اگر می‌خواهید کاربر در هر کشور قیمت را با واحد پول خودش ببیند، برای **همان محصول** چند Price با ارزهای مختلف بسازید (مثلاً یک Price با SEK، یکی با USD، یکی با EUR). اپ بر اساس کشور کاربر (یا پارامتر `currency`) ارز را انتخاب می‌کند و همان قیمت را نشان می‌دهد.

---

## مرحله ۴: اطمینان از فعال بودن قیمت

- در لیست قیمت‌ها مطمئن شوید قیمت Diamond **Aktiv** (Active) است.
- اگر غیرفعال است، آن را ویرایش و دوباره فعال کنید.

---

## مرحله ۵: تست در اپ

1. سرور بک‌اند را یک بار ریستارت کنید (تا کش در صورت وجود پاک شود).
2. به صفحه **Upgrade** در اپ بروید.
3. باید کارت **Diamond Plan** با قیمت و دکمه خرید (مثلاً «Get Diamond») را ببینید؛ بج «Coming Soon» فقط وقتی است که در Stripe هیچ قیمتی برای محصول حاوی «Diamond» نباشد.

---

## نکات

- **نام محصول** در Stripe باید حاوی کلمه `Diamond` باشد تا در کد به‌عنوان پلن Diamond شناخته شود.
- برای **چند ارز**: برای همان محصول Diamond چند Price با ارزهای مختلف (مثلاً SEK، USD، EUR) بسازید؛ اپ بر اساس کشور/ارز کاربر قیمت مناسب را نشان می‌دهد.
- در حالت **Test** از کارت تست Stripe استفاده کنید؛ برای **Live** بعد از سوئیچ به حساب لایو، همان مراحل را در محیط Live انجام دهید.
